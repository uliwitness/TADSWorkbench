<html><head><link rel=stylesheet type="text/css" href="../libref.css"><title>gramprod.h</title></head><body>
<table class=ban><tr><td><h1>gramprod.h</h1><td align=right><a href="../file/gramprod.h.html">documentation</a></table><pre>
<a name="1"></a>#charset "us-ascii"
<a name="2"></a>
<a name="3"></a>/* 
<a name="4"></a> *   Copyright (c) 2000, 2006 Michael J. Roberts
<a name="5"></a> *   
<a name="6"></a> *   This file is part of TADS 3.
<a name="7"></a> *   
<a name="8"></a> *   The header defines the GrammarProd intrinsic class and some associated
<a name="9"></a> *   properties and constants.  
<a name="10"></a> */
<a name="11"></a>
<a name="12"></a>#ifndef _GRAMPROD_H_
<a name="13"></a>#define _GRAMPROD_H_
<a name="14"></a>
<a name="15"></a>/* include our base class definition */
<a name="16"></a>#include "systype.h"
<a name="17"></a>
<a name="18"></a>/*
<a name="19"></a> *   The GrammarProd intrinsic class is a specialized type that's used to
<a name="20"></a> *   create parsers.  An object of this type is created automatically by the
<a name="21"></a> *   TADS 3 compiler for each 'grammar' statement.  This class encapsulates
<a name="22"></a> *   the prototype token list and mapping information defined in a 'grammar'
<a name="23"></a> *   statement, and provides a method to match its prototype to an actual
<a name="24"></a> *   input token string.  
<a name="25"></a> */
<a name="26"></a>intrinsic class GrammarProd 'grammar-production/030001': Object
<a name="27"></a>{
<a name="28"></a>    /*
<a name="29"></a>     *   Parse the token list, starting at this production, using the given
<a name="30"></a>     *   dictionary to look up tokens.  Returns a list of match objects.  If
<a name="31"></a>     *   there are no matches to the grammar, simply returns an empty list.  
<a name="32"></a>     */
<a name="33"></a>    parseTokens(tokenList, dict);
<a name="34"></a>
<a name="35"></a>    /*
<a name="36"></a>     *   Retrieve a detailed description of the production.  This returns a
<a name="37"></a>     *   list of GrammarAltInfo objects that describe the rule alternatives
<a name="38"></a>     *   that make up this production.  
<a name="39"></a>     */
<a name="40"></a>    getGrammarInfo();
<a name="41"></a>}
<a name="42"></a>
<a name="43"></a>/*
<a name="44"></a> *   Token slot types.  Each token slot in an alternative has a type, which
<a name="45"></a> *   determines what it matches in an input token list.  getGrammarInfo()
<a name="46"></a> *   returns these type codes in the GrammarAltTokInfo objects.  
<a name="47"></a> */
<a name="48"></a>
<a name="49"></a>#define GramTokTypeProd    1              /* token matches a sub-production */
<a name="50"></a>#define GramTokTypeSpeech  2     /* token matches a specific part of speech */
<a name="51"></a>#define GramTokTypeLiteral 3              /* token matches a literal string */
<a name="52"></a>#define GramTokTypeTokEnum 4            /* token matches a token class enum */
<a name="53"></a>#define GramTokTypeStar    5    /* token matches all remaining input tokens */
<a name="54"></a>#define GramTokTypeNSpeech 6      /* matches any of several parts of speech */
<a name="55"></a>
<a name="56"></a>
<a name="57"></a>/* 
<a name="58"></a> *   Properties for the first and last token indices, and the complete
<a name="59"></a> *   original token list.
<a name="60"></a> *   
<a name="61"></a> *   Each match tree object will have the firstTokenIndex and lastTokenIndex
<a name="62"></a> *   properties set to the bounding token indices for its subtree.  Each
<a name="63"></a> *   match tree object will also have tokenList set to the original token
<a name="64"></a> *   list passed to the parseTokens() that created the match tree, and
<a name="65"></a> *   tokenMatchList set to a list of the Dictionary's comparator's
<a name="66"></a> *   matchValues() result for each token match.  
<a name="67"></a> */
<a name="68"></a>property firstTokenIndex, lastTokenIndex, tokenList, tokenMatchList;
<a name="69"></a>export firstTokenIndex 'GrammarProd.firstTokenIndex';
<a name="70"></a>export lastTokenIndex  'GrammarProd.lastTokenIndex';
<a name="71"></a>export tokenList       'GrammarProd.tokenList';
<a name="72"></a>export tokenMatchList  'GrammarProd.tokenMatchList';
<a name="73"></a>
<a name="74"></a>
<a name="75"></a>#endif /* _GRAMPROD_H_ */
</pre>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/6/2009 from TADS version 3.0.18.1</div>
</body>
</html>

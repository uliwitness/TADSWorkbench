<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>File</title></head><body>
<table class=ban><tr><td align=left><span class=title>File</span><span class=type>class</span><td align=right><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#108">108</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_SubClassTree_">Subclass<br>Tree</a>
<td><a href="#_ObjectSummary_">Global<br>Objects</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   The File intrinsic class provides access to files in the external file   system.  This lets you create, read, and write files.  The class   supports text files (with translations to and from local character   sets), "data" files (using the special TADS 2 binary file format), and   "raw" files (this mode lets you manipulate files in arbitrary text or   binary formats by giving you direct access to the raw bytes in the   file). 
<p>
<code>intrinsic class 
<b>File</b> :  &nbsp; <a href="../object/Object.html">Object</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>File</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/Object.html">Object</a></code><br>
<a name="_SubClassTree_"></a><p><div class=mjhd><span class=hdln>Subclass Tree</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_ObjectSummary_"></a><p><div class=mjhd><span class=hdln>Global Objects</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
</code><p>
<code>
</code><p>
<i>(none)</i>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#closeFile">closeFile</a>&nbsp; 
<a href="#getCharacterSet">getCharacterSet</a>&nbsp; 
<a href="#getFileSize">getFileSize</a>&nbsp; 
<a href="#getPos">getPos</a>&nbsp; 
<a href="#readBytes">readBytes</a>&nbsp; 
<a href="#readFile">readFile</a>&nbsp; 
<a href="#setCharacterSet">setCharacterSet</a>&nbsp; 
<a href="#setPos">setPos</a>&nbsp; 
<a href="#setPosEnd">setPosEnd</a>&nbsp; 
<a href="#writeBytes">writeBytes</a>&nbsp; 
<a href="#writeFile">writeFile</a>&nbsp; 
</code><p>
<p>Inherited from <code>Object</code> :<br>
<code>
<a href="../object/Object.html#getPropList">getPropList</a>&nbsp; 
<a href="../object/Object.html#getPropParams">getPropParams</a>&nbsp; 
<a href="../object/Object.html#getSuperclassList">getSuperclassList</a>&nbsp; 
<a href="../object/Object.html#isClass">isClass</a>&nbsp; 
<a href="../object/Object.html#isTransient">isTransient</a>&nbsp; 
<a href="../object/Object.html#ofKind">ofKind</a>&nbsp; 
<a href="../object/Object.html#propDefined">propDefined</a>&nbsp; 
<a href="../object/Object.html#propInherited">propInherited</a>&nbsp; 
<a href="../object/Object.html#propType">propType</a>&nbsp; 
<a href="../object/Object.html#valToSymbol">valToSymbol</a>&nbsp; 
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="closeFile"></a>
<table class=decl><tr><td><code>closeFile ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#226">226</a>]</table><div class=desc>   Close the file.  Flushes any buffered information to the underlying   system file and releases any system resources (such as share locks   or system buffers) associated with the file.  After this routine is   called, no further operations on the file can be performed (a   FileClosedException will be thrown if any subsequent operations are   attempted). <p>   It's not strictly necessary to call closeFile() on a File, since the   system will automatically do this work when the File object becomes   unreachable and is discarded by the garbage collector.  However, it   is good practice to close a file explicitly by calling this method   as soon as the program reaches a point at which it knows it's done   with the file, because garbage collection might not run for a   significant amount of time after the program is actually done with   the file, in which case the system resources associated with the   file would be needlessly retained for this extended time. <p>
</div>
<a name="getCharacterSet"></a>
<table class=decl><tr><td><code>getCharacterSet ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#198">198</a>]</table><div class=desc>   get the CharacterSet object the File is currently using; returns   nil for a non-text file <p>
</div>
<a name="getFileSize"></a>
<table class=decl><tr><td><code>getFileSize ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#375">375</a>]</table><div class=desc>get the size in bytes of the file<p>
</div>
<a name="getPos"></a>
<table class=decl><tr><td><code>getPos ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#319">319</a>]</table><div class=desc>   Get the current read/write position in the file.  Returns the byte   offset in the file of the next byte to be read or written.  Note   that this value is an offset, so 0 is the offset of the first byte   in the file. <p>
</div>
<a name="readBytes"></a>
<table class=decl><tr><td><code>readBytes (byteArr, start?, cnt?)</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#299">299</a>]</table><div class=desc>   Read bytes from the file into the given ByteArray object.  This can   only be used for a file opened in 'raw' mode.  If 'start' and 'cnt'   are given, they give the starting index in the byte array at which   the bytes read are to be stored, and the number of bytes to read,   respectively; if these are omitted, one byte is read from the file   for each byte in the byte array. <p>   Returns the number of bytes actually read into the byte array,   which will be less than or equal to the number requested.  If the   number read is less than the number requested, it means that the   end of the file was encountered, and only the returned number of   bytes were available. <p>
</div>
<a name="readFile"></a>
<table class=decl><tr><td><code>readFile ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#256">256</a>]</table><div class=desc>   Read from the file.  Returns a data value that depends on the file   mode, as described below, or nil at end of file. <p>   If the file is open in text mode, this reads a line of text from the   file and returns a string with the text of the line read.  A line of   text is a sequence of characters terminated with a line-ending   sequence, which is a carriage return, line feed, CR/LF pair, LF/CR   pair, or a Unicode line terminator character (0x2028) if the file is   being read with one of the Unicode encodings.  If the line read ends   in a line-ending sequence, the returned text will end in a '\n'   character, regardless of which of the possible line-ending sequences   is actually in the file, so the caller need not worry about the   details of the external file's format.  Every line read from the   file will end in a '\n' except possibly the last line - if the file   does not end with a line-ending sequence, then the last line read   from the file will not end in a '\n' character.  All bytes read from   the file will be mapped to characters through the CharacterSet   object currently in effect in the file, so the returned string will   always be a standard Unicode string, regardless of the byte encoding   of the file. <p>   If the file is open in 'data' mode, this reads one data element   using the private tads-specific data format.  The result is a value   of one of the types writable with writeFile() in 'data' mode.  In   order to read a 'data' file, the file must have been previously   written in 'data' mode. <p>
</div>
<a name="setCharacterSet"></a>
<table class=decl><tr><td><code>setCharacterSet (charset)</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#206">206</a>]</table><div class=desc>   Set the CharacterSet object the File is to use from now on.  This   is not meaningful except for text files.  'charset' must be a   CharacterSet object; in particular note that a character set name   given as a string is not allowed here. <p>
</div>
<a name="setPos"></a>
<table class=decl><tr><td><code>setPos (pos)</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#339">339</a>]</table><div class=desc>   Set the current read/write position in the file.  'pos' is a byte   offset in the file; 0 is the offset of the first byte. <p>   For files in 'text' and 'data' modes, a caller should NEVER set the   file position to any value other than a value previously returned   by getPos(), because other positions might violate the format   constraints.  For example, if you move the file position to a byte   in the middle of a line-ending sequence in a text file, subsequent   reading from the file might misinterpret the sequence as something   other than a line ending, or as an extra line ending.  If you move   the position in a 'data' file to a byte in the middle of an integer   value, reading from the file would misinterpret as a data type tag   a byte that is part of the integer value instead.  So it is never   meaningful or safe to set an arbitrary byte offset in these file   formats; only values known to be valid by virtue of having been   returned from getPos() can be used here in these modes. <p>
</div>
<a name="setPosEnd"></a>
<table class=decl><tr><td><code>setPosEnd ( )</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#348">348</a>]</table><div class=desc>   Set the current read/write position to the end of the file.  This   can be used, for example, to open a 'data' mode file for   read/write/keep access (keeping the contents of an existing file)   and then adding more data after all of the existing data in the   file. <p>
</div>
<a name="writeBytes"></a>
<table class=decl><tr><td><code>writeBytes (byteArr, start?, cnt?)</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#311">311</a>]</table><div class=desc>   Write bytes from the ByteArray object into the file.  This can only   be used for a file opened in 'raw' mode.  If 'start' and 'cnt' are   given, they give the starting index in the byte array of the bytes   to be written, and the number of bytes to write, respectively; if   these are omitted, all of the bytes in the array are written. <p>   No return value; if an error occurs writing the data, a   FileIOException is thrown. <p>
</div>
<a name="writeFile"></a>
<table class=decl><tr><td><code>writeFile (val)</code><td align=right><code><a href="../file/file.h.html">file.h</a>[<a href="../source/file.h.html#283">283</a>]</table><div class=desc>   Write to the file.  Writes the given value to the file in a format   that depends on the file mode, as described below.  No return   value; if an error occurs writing the data, this throws a   FileIOException. <p>   If the file is open in text mode, this writes text to the file,   converting the given value to a string if necessary (and throwing   an error if such a conversion is not possible), and translating the   string to be written to bytes by mapping the string through the   CharacterSet object currently in effect for the file.  Note that no   line-ending characters are automatically added to the output, so if   the caller wishes to write line terminators, it should simply   include a '\n' character at the end of each line. <p>   If the file is open in 'data' mode, this writes the value, which   must be a string, integer, enum, or 'true' value, in a private   tads-specific data format that can later be read using the same   format.  The values are converted to the private binary format,   which is portable across platforms: a file written in 'data' mode   on one machine can be copied (byte-for-byte) to another machine,   even one that uses different hardware and a different operating   system, and read back in 'data' mode on the new machine to yield   the original values written. <p>
</div>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/6/2009 from TADS version 3.0.18.1</div>
</body>
</html>

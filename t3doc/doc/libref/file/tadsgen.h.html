<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>tadsgen.h</title></head><body>
<table class=ban><tr><td align=left><span class=title>tadsgen.h</span><span class=type>file</span><td align=right><a href="../source/tadsgen.h.html">source file</a></table><p>
<table class=nav><tr>
<td><b>Classes</b><br><a href="#_ClassSummary_">Summary</a><br>&nbsp;<td><b>Functions</b><br><a href="#_FunctionSummary_">Summary</a><br><a href="#_Functions_">Details</a><td><b>Macros</b><br><a href="#_MacroSummary_">Summary</a><br><a href="#_Macros_">Details</a><td><b>Enums</b><br><a href="#_EnumSummary_">Summary</a><br><a href="#_Enums_">Details</a><td><b>Templates</b><br><a href="#_TemplateSummary_">Summary</a><br><a href="#_Templates_">Details</a></table><div class=fdesc>
 <p> <p>   This header defines the tads-gen intrinsic function set.  This function   set provides some miscellaneous functions, including data conversions,   object iteration, regular expressions, and state persistence operations. 
</div>
<a name="_ClassSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Classes</span> &nbsp; </div><p>
<i>(none)</i>
<a name="FunctionSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Global Functions</span> &nbsp; </div><p>
<code>
<a href="#dataType">dataType</a>&nbsp; 
<a href="#firstObj">firstObj</a>&nbsp; 
<a href="#getArg">getArg</a>&nbsp; 
<a href="#getFuncParams">getFuncParams</a>&nbsp; 
<a href="#getTime">getTime</a>&nbsp; 
<a href="#makeString">makeString</a>&nbsp; 
<a href="#max">max</a>&nbsp; 
<a href="#min">min</a>&nbsp; 
<a href="#nextObj">nextObj</a>&nbsp; 
<a href="#rand">rand</a>&nbsp; 
<a href="#randomize">randomize</a>&nbsp; 
<a href="#restartGame">restartGame</a>&nbsp; 
<a href="#restoreGame">restoreGame</a>&nbsp; 
<a href="#rexGroup">rexGroup</a>&nbsp; 
<a href="#rexMatch">rexMatch</a>&nbsp; 
<a href="#rexReplace">rexReplace</a>&nbsp; 
<a href="#rexSearch">rexSearch</a>&nbsp; 
<a href="#saveGame">saveGame</a>&nbsp; 
<a href="#savepoint">savepoint</a>&nbsp; 
<a href="#toInteger">toInteger</a>&nbsp; 
<a href="#toString">toString</a>&nbsp; 
<a href="#undo">undo</a>&nbsp; 
</code><p>
<a name="_MacroSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Macros</span> &nbsp; </div><p>
<code>
<a href="#GetTimeDateAndTime">GetTimeDateAndTime</a>&nbsp; 
<a href="#GetTimeTicks">GetTimeTicks</a>&nbsp; 
<a href="#ObjAll">ObjAll</a>&nbsp; 
<a href="#ObjClasses">ObjClasses</a>&nbsp; 
<a href="#ObjInstances">ObjInstances</a>&nbsp; 
<a href="#ReplaceAll">ReplaceAll</a>&nbsp; 
<a href="#ReplaceOnce">ReplaceOnce</a>&nbsp; 
<a href="#TADSGEN_H">TADSGEN_H</a>&nbsp; 
</code><p>
<a name="_EnumSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Enums</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_TemplateSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Templates</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_Functions_"></a><p><div class=mjhd><span class=hdln>Global Functions</span> &nbsp; </div><p>
<a name="dataType"></a>
<table class=decl><tr><td><code>dataType (val)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#28">28</a>]</table><div class=desc>   Get the type of the given value.  This returns a TypeXxx value. <p>
</div>
<a name="firstObj"></a>
<table class=decl><tr><td><code>firstObj (cls?, flags?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#45">45</a>]</table><div class=desc>   Get the first object in memory.  If 'cls' is provided, we return the   first object of the given class; otherwise we return the first   object of any kind.  'flags' is an optional bitwise combination of   ObjXxx values, specifying whether classes, instances, or both are   desired.  If this isn't specified, ObjAll is assumed.  This is used   in conjunction with nextObj() to iterate over all objects in memory,   or all objects of a given class. <p>
</div>
<a name="getArg"></a>
<table class=decl><tr><td><code>getArg (idx)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#34">34</a>]</table><div class=desc>   Get the given parameter to the current function.  'idx' is 1 for the   first argument in left-to-right order, 2 for the second, and so on. <p>
</div>
<a name="getFuncParams"></a>
<table class=decl><tr><td><code>getFuncParams (func)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#313">313</a>]</table><div class=desc>   Get a description of the parameters to the given function.  'func'   is a function pointer.  This function returns a list: [minArgs,   optionalArgs, isVarargs], where minArgs is the minimum number of   arguments required by the function, optionalArgs is the additional   number of arguments that can be optionally provided to the function,   and isVarargs is true if the function takes any number of additional   ("varying") arguments, nil if not. <p>
</div>
<a name="getTime"></a>
<table class=decl><tr><td><code>getTime (timeType?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#159">159</a>]</table><div class=desc>   Get the current local time. <p>   If timeType is GetTimeDateAndTime (or is omitted), this returns the   calendar date and wall-clock time, as a list: [year, month,   dayOfMonth, dayOfWeek, dayOfYear, hour, minute, second, timer].   Year is the year AD (for example, 2006); month is the current month,   from 1 (January) to 12 (December); dayOfMonth is the calendar day of   the month, from 1 to 31; dayOfWeek is the day of the week, from 1   (Sunday) to 7 (Saturday); dayOfYear is the current day of the year,   from 1 (January 1) to 366 (December 31 in a leap year); hour is the   hour on a 24-hour clock, ranging from 0 (midnight) to 23 (11pm);   minute is the minute of the hour, from 0 to 59; second is the second   of the minute, from 0 to 59; and timer is the number of seconds   elapsed since the "epoch," defined arbitrarily as midnight, January   1, 1970. <p>   If timeType is GetTimeTicks, this return the number of milliseconds   since an arbitrary starting time.  The first call to get this   information sets the starting time, so it will return zero;   subsequent calls will return the amount of time elapsed from that   starting time.  Note that because a signed 32-bit integer can only   hold values up to about 2 billion, the maximum elapsed time that   this value can represent is about 24.8 days; so, if your program   runs continuously for more than this, the timer value will roll   around to zero at each 24.8 day multiple.  So, it's possible for   this function to return a smaller value than on a previous   invocation, if the two invocations straddle a 24.8-day boundary. <p>
</div>
<a name="makeString"></a>
<table class=decl><tr><td><code>makeString (val, repeatCount?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#302">302</a>]</table><div class=desc>   Create a string by repeating the given value the given number of   times.  If the repeat count isn't specified, the default is 1.   'val' can be a string, in which case the string is simply repeated   the given number of times; an integer, in which case the given   Unicode character is repeated; or a list of integers, in which case   the given Unicode characters are repeated, in the order of the list.   The list format can be used to create a string from a list of   Unicode characters that you've been manipulating as a character   array, which is sometimes a more convenient or efficient way to do   certain types of string handling than using the actual string type. <p>
</div>
<a name="max"></a>
<table class=decl><tr><td><code>max (val1, ...)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#279">279</a>]</table><div class=desc>   Get the maximum of the given arguments.  The values must be   comparable with the ordinary "&lt;" and "&gt;" operators.  Note that   because this is an ordinary function call, all of the arguments are   evaluated (which means any side effects of these evaluations will be   triggered). <p>
</div>
<a name="min"></a>
<table class=decl><tr><td><code>min (val1, ...)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#288">288</a>]</table><div class=desc>   Get the minimum of the given arguments.  The values must be   comparable with the ordinary "&lt;" and "&gt;" operators. Note that   because this is an ordinary function call, all of the arguments are   evaluated (which means any side effects of these evaluations will be   triggered). <p>
</div>
<a name="nextObj"></a>
<table class=decl><tr><td><code>nextObj (obj, cls?, flags?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#53">53</a>]</table><div class=desc>   Get the next object in memory after the given object, optionally of   the given class and optionally limiting to instances, classes, or   both.  This is used to continue an iteration started with   firstObj(). <p>
</div>
<a name="rand"></a>
<table class=decl><tr><td><code>rand (x, ...)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#103">103</a>]</table><div class=desc>   Select a random number or a random value. <p>   If only one argument is supplied, and this argument is an integer   value, the function returns an integer from 0 to one less than the   argument value.  For example, rand(10) returns a number from 0 to 9   inclusive. <p>   If one argument is supplied, and the argument is a list, the   function randomly selects one of the values from the list and   returns it. <p>   If more than one argument is supplied, the function randomly selects   one of the arguments and returns it.  (Note that since this is an   ordinary function call, all of the arguments are evaluated,   triggering any side effects of those evaluations.) <p>   In all cases, the random number selection is uniformly distributed,   meaning that each possible return value has equal probability. <p>
</div>
<a name="randomize"></a>
<table class=decl><tr><td><code>randomize ( )</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#81">81</a>]</table><div class=desc>   Seed the random-number generator.  This uses unpredictable   information from the external operating system environment (which   might be something like the current time of day, but the exact   information used varies by system) to seed the rand() generator with   a new starting position.  Since rand() is a pseudo-random number   generator, its sequence is deterministic - each time it's started   with a given seed value, the identical sequence will result.  This   function helps produce apparent randomness by effectively   randomizing the starting point of the sequence. <p>   Note that if randomize() is never called, the system will use a   fixed initial seed, so rand() will return the same sequence each   time the program is run.  This is intentional, because it makes the   program's behavior exactly repeatable, even if the program calls   rand() to select random numbers.  This type of repeatable,   deterministic behavior is especially useful for testing purposes,   since it allows you to run the program through a fixed set of input   and compare the results against a fixed set of output, knowing the   the random number sequence will be the same on each run.  Typically,   what you'd want to do is check at start-up to see if you're in   "testing" mode (however you wish to define that), and call   randomize() only if you're not in testing mode.  This will create   apparently random behavior on normal runs, but produce repeatable   behavior during testing. <p>
</div>
<a name="restartGame"></a>
<table class=decl><tr><td><code>restartGame ( )</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#270">270</a>]</table><div class=desc>   Restart the program from the beginning.  This resets all persistent   objects to their initial state, as they were when the program was   first started. <p>
</div>
<a name="restoreGame"></a>
<table class=decl><tr><td><code>restoreGame (filename)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#263">263</a>]</table><div class=desc>   Restore a previously saved state file.  This loads the states of all   persistent objects stored in the given file.  The file must have   been saved by the current version of the current running program; if   not, an exception is thrown. <p>
</div>
<a name="rexGroup"></a>
<table class=decl><tr><td><code>rexGroup (groupNum)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#203">203</a>]</table><div class=desc>   Get the given regular expression group.  This can be called after a   successful rexMatch() or rexSearch() call to retrieve information on   the substring that matched the given "group" within the regular   expression.  A group is a parenthesized sub-pattern within the   regular expression; groups are numbered left to right by the open   parenthesis, starting at group 1.  If there is no such group in the   last regular expression searched or matched, or the group wasn't   part of the match (for example, because it was part of an   alternation that wasn't matched), the return value is nil.  If the   group is valid and was part of the match, the return value is a   list: [index, length, string], where index is the character index   within the matched or searched string of the start of the group   match, length is the character length of the group match, and string   is the text of the group match. <p>
</div>
<a name="rexMatch"></a>
<table class=decl><tr><td><code>rexMatch (pat, str, index?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#173">173</a>]</table><div class=desc>   Match a string to a regular expression pattern.  'pat' can be either   a string giving the regular expression, or can be a RexPattern   object.  'str' is the string to match, and 'index' is the starting   character index (the first character is at index 1) at which to   start matching.  Returns the length in characters of the match, or   nil if the string doesn't match the pattern.  (Note that a return   value of zero doesn't indicate failure - rather, it indicates a   successful match of the pattern to zero characters.  This is   possible for a pattern with a zero-or-more closure, such as 'x*' or   'x?'.) <p>
</div>
<a name="rexReplace"></a>
<table class=decl><tr><td><code>rexReplace (pat, str, replacement, flags, index?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#226">226</a>]</table><div class=desc>   Search for the given regular expression pattern (which can be given   as a regular expression string or as a RexPattern object) within the   given string, and replace one or more occurrences of the pattern   with the given replacement text.  If 'flags' includes ReplaceAll,   all occurrences of the pattern are replaced; otherwise only the   first occurrence is replaced.  'index', if provided, is the starting   character index of the search; instances of the pattern before this   index will be ignored.  Returns the result string with all of the   desired replacements.  When an instance of the pattern is found and   then replaced, the replacement string is not rescanned for further   occurrences of the text, so there's no danger of infinite recursion;   instead, scanning proceeds from the next character after the   replacement text. <p>   The replacement text can use "%n" sequences to substitute group   matches from the input into the output.  %1 is replaced by the match   to the first group, %2 the second, and so on.  %* is replaced by the   entire matched input.  (Because of the special meaning of "%", you   must use "%%" to include a percent sign in the replacement text.) <p>
</div>
<a name="rexSearch"></a>
<table class=decl><tr><td><code>rexSearch (pat, str, index?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#185">185</a>]</table><div class=desc>   Search the given string for the given regular expression pattern.   'pat' is a string giving the regular expression, or a RexPattern   object.  'str' is the string to search, and 'index' is the optional   starting index (the first character is at index 1).  If the pattern   cannot be found, returns nil.  If the pattern is found, the return   value is a list: [index, length, string], where index is the   starting character index of the match, length is the length in   characters of the match, and string is the text of the match. <p>
</div>
<a name="saveGame"></a>
<table class=decl><tr><td><code>saveGame (filename)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#255">255</a>]</table><div class=desc>   Save the current system state into the given file.  This uses the   VM's internal state-save mechanism to store the current state of all   persistent objects in the given file.  Any existing file is   overwritten. <p>
</div>
<a name="savepoint"></a>
<table class=decl><tr><td><code>savepoint ( )</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#232">232</a>]</table><div class=desc>   Create an UNDO savepoint.  This adds a marker to the VM's internal   UNDO log, establishing a point in time for a future UNDO operation. <p>
</div>
<a name="toInteger"></a>
<table class=decl><tr><td><code>toInteger (val, radix?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#128">128</a>]</table><div class=desc>   Convert the given value to an integer.  If 'val' is a string, the   function parses the value as an integer value in the numeric base   given by 'radix' (which can be one of 2, 8, 10, or 16), or base 10   (decimal) if 'radix' is omitted.  If 'val' is the string 'true' or   'nil', the function returns true or nil, respectively.  If 'val' is   a BigNumber value, the value is rounded to the nearest integer; an   exception ("numeric overflow") is thrown if the number is out of   range for a 32-bit integer. <p>
</div>
<a name="toString"></a>
<table class=decl><tr><td><code>toString (val, radix?)</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#116">116</a>]</table><div class=desc>   Convert the given value to a string representation.  'val' can be an   integer, in which case it's converted to a string representation in   the numeric base given by 'radix' (which can be any value from 2 to   36), or base 10 (decimal) if 'radix' is omitted; nil or true, in   which case the string 'nil' or 'true' is returned; a string, which   is returned unchanged; or a BigNumber, in which case the value is   converted to a string representation in decimal.  (Note that in the   case of BigNumber, you might prefer to use BigNumber.formatString(),   as that gives you much more control over the formatting.) <p>
</div>
<a name="undo"></a>
<table class=decl><tr><td><code>undo ( )</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#247">247</a>]</table><div class=desc>   UNDO to the most recent savepoint.  This uses the VM's internal UNDO   log to undo all changes to persistent objects, up to the most recent   savepoint.  Returns true if the operation succeeded, nil if not.  A   nil return means that there's no further UNDO information recorded,   which could be because the program has already undone everything   back to the start of the session, or because the UNDO log was   truncated due to memory size such that no savepoints are recorded.   (The system automatically limits the UNDO log's total memory   consumption, according to local system parameters.  This function   requires at least one savepoint to be present, because otherwise it   could create an inconsistent state.) <p>
</div>
<a name="_Macros_"></a><p><div class=mjhd><span class=hdln>Macros</span> &nbsp; </div><p>
<a name="GetTimeDateAndTime"></a>
<table class=decl><tr><td><code>GetTimeDateAndTime</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#332">332</a>]</table><div class=desc><code>1</code><br>   getTime() flags <p>
</div>
<a name="GetTimeTicks"></a>
<table class=decl><tr><td><code>GetTimeTicks</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#333">333</a>]</table><div class=desc><code>2</code><br><i>no description available</i><p>
</div>
<a name="ObjAll"></a>
<table class=decl><tr><td><code>ObjAll</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#321">321</a>]</table><div class=desc><code>(ObjInstances | ObjClasses)</code><br><i>no description available</i><p>
</div>
<a name="ObjClasses"></a>
<table class=decl><tr><td><code>ObjClasses</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#320">320</a>]</table><div class=desc><code>0x0002</code><br><i>no description available</i><p>
</div>
<a name="ObjInstances"></a>
<table class=decl><tr><td><code>ObjInstances</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#319">319</a>]</table><div class=desc><code>0x0001</code><br>   flags for firstObj() and nextObj() <p>
</div>
<a name="ReplaceAll"></a>
<table class=decl><tr><td><code>ReplaceAll</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#327">327</a>]</table><div class=desc><code>0x0001</code><br><i>no description available</i><p>
</div>
<a name="ReplaceOnce"></a>
<table class=decl><tr><td><code>ReplaceOnce</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#326">326</a>]</table><div class=desc><code>0x0000</code><br>   rexReplace() flags <p>
</div>
<a name="TADSGEN_H"></a>
<table class=decl><tr><td><code>TADSGEN_H</code><td align=right><code><a href="../file/tadsgen.h.html">tadsgen.h</a>[<a href="../source/tadsgen.h.html#18">18</a>]</table><div class=desc><code></code><br>   TADS basic data manipulation intrinsic function set <p>
</div>
<a name="_Enums_"></a><p><div class=mjhd><span class=hdln>Enums</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_Templates_"></a><p><div class=mjhd><span class=hdln>Templates</span> &nbsp; </div><p>
<i>(none)</i>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/6/2009 from TADS version 3.0.18.1</div>
</body>
</html>

<html><head><link rel=stylesheet type="text/css" href="../libref.css"><title>tadsiox.h</title></head><body>
<table class=ban><tr><td><h1>tadsiox.h</h1><td align=right><a href="../file/tadsiox.h.html">documentation</a></table><pre>
<a name="1"></a>#charset "us-ascii"
<a name="2"></a>
<a name="3"></a>/* 
<a name="4"></a> *   Copyright (c) 1999, 2006 Michael J. Roberts
<a name="5"></a> *   
<a name="6"></a> *   This file is part of TADS 3
<a name="7"></a> *   
<a name="8"></a> *   This header defines the tads-io-ext function sets, which provides
<a name="9"></a> *   optional extensions to the standard input/output set.
<a name="10"></a> *   
<a name="11"></a> *   These functions are defined in a separate function set from the basic
<a name="12"></a> *   tads-io set, because the features defined here are available only on
<a name="13"></a> *   certain platforms.  Be aware that using this function set will limit
<a name="14"></a> *   your program to interpreters that support it, and will prevent your
<a name="15"></a> *   program from running on some systems.  
<a name="16"></a> */
<a name="17"></a>
<a name="18"></a>#ifndef TADSIOX_H
<a name="19"></a>#define TADSIOX_H
<a name="20"></a>
<a name="21"></a>/*
<a name="22"></a> *   The TADS input/output extensions function set.
<a name="23"></a> */
<a name="24"></a>intrinsic 'tads-io-ext/030000'
<a name="25"></a>{
<a name="26"></a>    /*
<a name="27"></a>     *   Show a popup menu.  This opens a temporary window, drawn in a style
<a name="28"></a>     *   consistent with the local conventions for popup menus.  The new
<a name="29"></a>     *   window is shown in the foreground, in front of the active game
<a name="30"></a>     *   window.  'txt' gives HTML text that's used for the contents of the
<a name="31"></a>     *   new window.
<a name="32"></a>     *   
<a name="33"></a>     *   'x' and 'y' give the location of the top left corner of the new
<a name="34"></a>     *   window.  The coordinates are given in pixels relative to the top
<a name="35"></a>     *   left of the game window.  If these are nil (note that *both* must be
<a name="36"></a>     *   nil if either one is), the popup is shown at a suitable local
<a name="37"></a>     *   default position for a context menu.  On Windows, the default
<a name="38"></a>     *   position is the current mouse position.
<a name="39"></a>     *   
<a name="40"></a>     *   This function doesn't return until the user either makes a selection
<a name="41"></a>     *   from the menu or cancels the menu.  If the user clicks the mouse
<a name="42"></a>     *   outside of the popup menu, or switches to a different window, the
<a name="43"></a>     *   popup is canceled - this means that the popup menu will
<a name="44"></a>     *   automatically disappear, and the function will return the 'canceled'
<a name="45"></a>     *   status code.  If the user makes a selection from the popup menu by
<a name="46"></a>     *   clicking on a hyperlink shown within the menu, the menu disappears
<a name="47"></a>     *   and the function returns the 'href' status code and the HREF text of
<a name="48"></a>     *   the selected hyperlink.
<a name="49"></a>     *   
<a name="50"></a>     *   (Note that some systems might have different local conventions for
<a name="51"></a>     *   operating a popup menu, so the actual user actions involved in
<a name="52"></a>     *   selecting or canceling might differ from system to system.  In these
<a name="53"></a>     *   cases, the local conventions apply.)
<a name="54"></a>     *   
<a name="55"></a>     *   The return value is a list.  The first element of the list is one of
<a name="56"></a>     *   the PopMenuXxx status codes, indicating what happened.  If the
<a name="57"></a>     *   status code is PopMenuHRef, the list will have a second element,
<a name="58"></a>     *   containing a string giving the HREF of the hyperlink the user
<a name="59"></a>     *   clicked on.  For any other status codes, the list will have no
<a name="60"></a>     *   further elements.  
<a name="61"></a>     */
<a name="62"></a>    showPopupMenu(x, y, txt);
<a name="63"></a>
<a name="64"></a>    /*
<a name="65"></a>     *   Enable/disable a system menu command.  Some interpreters offer a set
<a name="66"></a>     *   of common system-level game commands via menus, toolbars, or similar
<a name="67"></a>     *   UI widgets, depending on local conventions - commands such as SAVE,
<a name="68"></a>     *   RESTORE, UNDO, and QUIT that most games offer.
<a name="69"></a>     *   
<a name="70"></a>     *   By default, when the player selects this sort of menu command, the
<a name="71"></a>     *   interpreter sends it to the game by stuffing the literal text of the
<a name="72"></a>     *   command into the command line, and returning it from the
<a name="73"></a>     *   command-line input function (inputLine(), typically).  This was
<a name="74"></a>     *   traditionally the only way for the interpreter to send this sort of
<a name="75"></a>     *   command to the game.  In particular, there was no way to send this
<a name="76"></a>     *   kind of command via the "event input" mechanism (as in
<a name="77"></a>     *   inputEvent()).
<a name="78"></a>     *   
<a name="79"></a>     *   This function allows the game to control (1) which commands are
<a name="80"></a>     *   enabled for normal command-line input, and (2) whether or not the
<a name="81"></a>     *   commands are enabled for inputEvent().  By default, all commands are
<a name="82"></a>     *   enabled for inputLine(), and all are disabled for inputEvent().
<a name="83"></a>     *   
<a name="84"></a>     *   When a command is enabled for inputLine(), it's returned from
<a name="85"></a>     *   inputLine() as the command-line string corresponding to the command.
<a name="86"></a>     *   The SAVE command is returned as the text "save", for example.
<a name="87"></a>     *   
<a name="88"></a>     *   When a command is enabled for inputEvent(), it's returned as an
<a name="89"></a>     *   InEvtSysCommand event, with the command ID in the second element of
<a name="90"></a>     *   the event record's list.
<a name="91"></a>     *   
<a name="92"></a>     *   'id' is the ID of the command to enable/disable, or a list or vector
<a name="93"></a>     *   of IDs to set.  If a list or vector is used, all of the commands
<a name="94"></a>     *   listed are set to the same new status.  Command IDs are given by the
<a name="95"></a>     *   XxxCommand values defined in tadsio.h.
<a name="96"></a>     *   
<a name="97"></a>     *   'stat' is the new status to send.  This is a combination of the
<a name="98"></a>     *   MenuStatXxxEnable and MenuStatXxxDisable flags defined below.  For
<a name="99"></a>     *   any Xxx, only one of Enable or Disable can be used - if both are
<a name="100"></a>     *   specified together, the Enable flag takes precedence.  If you don't
<a name="101"></a>     *   specify either the Enable or Disable flag for an Xxx, then the
<a name="102"></a>     *   command is unaffected in that context - that is, its previous value
<a name="103"></a>     *   is left in effect.  For example, if you specify MenuStatEventEnable,
<a name="104"></a>     *   then the command is enabled for inputEvent(), and its previous
<a name="105"></a>     *   status for inputLine() is left unchanged.  
<a name="106"></a>     */
<a name="107"></a>    enableSystemMenuCommand(id, stat);
<a name="108"></a>}
<a name="109"></a>
<a name="110"></a>
<a name="111"></a>
<a name="112"></a>/* ------------------------------------------------------------------------ */
<a name="113"></a>/*
<a name="114"></a> *   showPopupMenu status codes.  The function returns a list whose first
<a name="115"></a> *   element is one of these codes. 
<a name="116"></a> */
<a name="117"></a>
<a name="118"></a>/* 
<a name="119"></a> *   Failed: the popup menu could not be shown.  This could indicate a
<a name="120"></a> *   resource problem (low memory, for example) or another system problem. 
<a name="121"></a> */
<a name="122"></a>#define PopMenuFail    0
<a name="123"></a>
<a name="124"></a>/* 
<a name="125"></a> *   HRef: the user clicked on a hyperlink shown in the menu.  The list will
<a name="126"></a> *   contain a second element giving a string with the HREF of the hyperlink
<a name="127"></a> *   the user selected. 
<a name="128"></a> */
<a name="129"></a>#define PopMenuHRef    1
<a name="130"></a>
<a name="131"></a>/* 
<a name="132"></a> *   Canceled: the user canceled the menu.  This usually means that the user
<a name="133"></a> *   clicked outside of the menu, or switched to a different application. 
<a name="134"></a> */
<a name="135"></a>#define PopMenuCancel  2
<a name="136"></a>
<a name="137"></a>/* 
<a name="138"></a> *   "End of file": this indicates that the application is being terminated,
<a name="139"></a> *   so it's not possible to obtain any further input from the user.
<a name="140"></a> */
<a name="141"></a>#define PopMenuEof     3
<a name="142"></a>
<a name="143"></a>
<a name="144"></a>/* ------------------------------------------------------------------------ */
<a name="145"></a>/*
<a name="146"></a> *   enableSystemMenuCommand() status codes.  You can control the inputLine()
<a name="147"></a> *   and inputEvent() status of a command independently - simply specify the
<a name="148"></a> *   flags for the context you want to change, and leave the others
<a name="149"></a> *   unspecified.
<a name="150"></a> *   
<a name="151"></a> *   MenuStatLineEnable and MenuStatLineDisable let you control the
<a name="152"></a> *   inputLine() status of a command.  If neither is specified, the old
<a name="153"></a> *   status is left unchagned for inputLine().
<a name="154"></a> *   
<a name="155"></a> *   MenuStatEventEnable and MenuStatEventDisable control the inputEvent()
<a name="156"></a> *   status of a command.  If neither is specified, the old status is left
<a name="157"></a> *   unchagned for inputEvent().  
<a name="158"></a> */
<a name="159"></a>#define MenuStatLineEnable   (0x0004 | 0x0008)
<a name="160"></a>#define MenuStatLineDisable  (0x0004 | 0x0000)
<a name="161"></a>
<a name="162"></a>#define MenuStatEventEnable  (0x0001 | 0x0002)
<a name="163"></a>#define MenuStatEventDisable (0x0001 | 0x0000)
<a name="164"></a>
<a name="165"></a>
<a name="166"></a>#endif /* TADSIOX_H */
</pre>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/6/2009 from TADS version 3.0.18.1</div>
</body>
</html>
